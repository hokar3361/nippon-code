## 📋 概要

NipponCodeをClaude Codeと同等の全自動AIコーディングアシスタントにする。ユーザーの要求を受けたら、**段階的・対話的に**AIと連携しながら完了まで自動実行する。

## ⚠️ 重要な教訓（めちゃくちゃ怒られた件）

### 過去の失敗
1. **なんちゃって実装の連続**
   - 「フレームワークだけ作って実装した気になっていた」
   - 「ファイル操作の枠組みだけ作って、実際のコード生成なし」
   - 「特定パターン（Webアプリ）だけ対応して汎用性なし」

2. **根本的な理解不足**
   - 一度に全部出力させようとして失敗
   - 長いファイルが途切れる問題を考慮せず
   - 段階的実行の重要性を理解していなかった

### 正しい理解
**Claude Codeは段階的・対話的に動作する汎用システム**
- AIに1つずつアクションを聞く
- 実行結果をフィードバック
- 「ユーザーの要求は満たされたか？」を確認
- 完了まで繰り返す

## 🎯 正しい実装要件

### 1. 段階的実行フロー
```
ユーザー: 「〇〇を作って」
↓
AI: 「まずファイルAを作成します」→ 実行
AI: 「次にファイルBを作成します」→ 実行  
AI: 「npm installを実行します」→ 実行
AI: 「エラーが出たので修正します」→ 実行
AI: 「要求が満たされました」→ 完了
```

### 2. AIとの対話ループ
- **1アクション1確認**：一度に全部やらせない
- **コンテキスト維持**：これまでの作業履歴を保持
- **エラーハンドリング**：エラー時はAIに修正を依頼
- **完了確認**：要求が満たされたかAIに確認

### 3. アクション抽出と実行
AIの出力から自動的にアクションを検出：
- 「〇〇.jsを作成」→ ファイル生成
- 「以下のコードを書く」→ コード抽出して保存
- 「npm installを実行」→ コマンド実行
- 「エラーを修正」→ 修正内容を適用

### 4. 汎用性の確保
- **どんなプログラミングタスクにも対応**
- Webアプリ、CLI、データ分析、バグ修正、何でも
- 特定パターンのハードコーディング禁止
- AIの判断に完全に委ねる

## 🔧 実装すべきコンポーネント

### 1. AutonomousAgent（自律エージェント）
```typescript
class AutonomousAgent {
  // ユーザー要求を段階的に実行
  async executeRequest(request: string): Promise<void>
  
  // AIに次のアクションを聞く
  private async getNextAction(context: Context): Promise<Action>
  
  // AIの出力からアクションを抽出
  private extractAction(aiResponse: string): Action
  
  // アクションを実行
  private executeAction(action: Action): Promise<Result>
  
  // 完了確認
  private async checkCompletion(context: Context): Promise<boolean>
}
```

### 2. ActionExtractor（アクション抽出器）
AIの自然言語出力から実行可能なアクションを抽出：
- ファイル作成検出
- コードブロック抽出
- コマンド検出
- 修正内容抽出

### 3. ContextManager（コンテキスト管理）
- 実行履歴の管理
- ファイル状態の追跡
- エラー履歴の保持
- 進捗状況の記録

## ⚠️ 絶対に守ること

1. **なんちゃって実装禁止**
   - 実際に動作するコードを書く
   - テストして動作確認する
   - 表面的な実装で済ませない

2. **段階的実行の徹底**
   - 一度に全部やらせない
   - 1ファイルずつ生成
   - 長いコードも途切れないように

3. **汎用性の確保**
   - 特定用途にハードコーディングしない
   - AIの判断に委ねる
   - どんなタスクにも対応

## 🎯 成功基準

以下が**すべて自動で**実行される：
1. 「Todoアプリ作って」→ 実際に動作するTodoアプリ完成
2. 「このバグ直して」→ バグ修正完了
3. 「テスト追加して」→ テストファイル作成・実行
4. 「Python でデータ分析」→ 分析スクリプト作成・実行
5. 「設定ファイル作って」→ 適切な設定ファイル生成

## 📝 補足

**これが最重要機能**。なんちゃって実装は絶対NG。
段階的・対話的にAIと連携しながら、ユーザーの要求を完全に満たすまで自動実行すること。

### 実装時の注意

毎回「実装しました〜」と言いながら実際には動かないコードを書く癖を直すこと。
ちゃんと動作確認してから「完了」と言うこと。